# services/api/routers/system.py
from __future__ import annotations

import os
from fastapi import APIRouter

from services.api.adapters.llm_adapters import LLM_CATALOG

ROOT = os.path.expanduser("~/demo-library")
SAMPLES = os.path.join(ROOT, "agents", "credit_appraisal", "sample_data")

router = APIRouter()


@router.get("/v1/system/agents")
def list_agents():
    return {"agents": ["credit_appraisal"]}


@router.get("/v1/system/llms")
def list_llms():
    # expose UI-friendly labels and ids
    return {"llms": [{"label": k, "value": v["id"], "hint": v["hint"]} for k, v in LLM_CATALOG.items()]}


@router.get("/v1/system/samples")
def list_samples():
    items = []
    if os.path.isdir(SAMPLES):
        for fn in sorted(os.listdir(SAMPLES)):
            if fn.endswith(".csv"):
                items.append({"name": fn, "path": f"{SAMPLES}/{fn}"})
    return {"samples": items}
